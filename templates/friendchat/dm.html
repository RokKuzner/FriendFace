{% extends "base.html" %}

{% block title %}FriendChat with {{ corresponder_username }}{% endblock %}

{% block head %}
    <link rel="stylesheet" href="/files/static/css?file=friendchat-dm">

    <script>
        let dm_id = "{{ dm_id }}"
        let current_user_id = "{{ current_user_id }}"
        let coresponed_id = "{{ coresponed_id }}"
    </script>
{% endblock %}

{% block navbars %}
    <div class="top-corresponder-info">
        <a href="/chat" class="top-corresponder-info-return-a">
            <img src="/files/static/icons?file=return.png" class="top-corresponder-info-return-image">
        </a>
        <img src="/files/media/profileimg?user={{ coresponed_id }}" class="round top-corresponder-info-user-image">
        <div class="top-corresponder-info-username">
            <strong>{{ corresponder_username }}</strong>
        </div>
        <div class="typing-animation-container hidden">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
{% endblock %}

{% block bottom %}

    <form autocomplete="off" class="send-message-form">
        {% csrf_token %}
        <textarea class="send-message-textarea" name="message_content" placeholder="Message"></textarea>
        <button type="submit" class="btn btn-primary send-button">Send</button>
    </form>
    
    <script src="/files/static/js?file=users_currently_typing_in_dm"></script>
    <script src="/files/static/js?file=handle_dm_messages"></script>
{% endblock %}